{% extends "base.html.twig" %}

{% block body %}
<h1>Liste des Coasters</h1>
<div class="d-flex justify-content-between">
    <a href="{{ path('app_coaster_add') }}" class="btn btn-success">Ajouter un coaster</a>
    <div>
        <form action="" method="get" class="d-flex">
            <select name="park" class="form-select">
                <option value="">Tous les parcs</option>
                {% for park in parks %}
                    <option value="{{ park.id }}" {% if park.id == app.request.get('park') %}selected{% endif %}>{{ park.name }}</option>
                {% endfor %}
            </select>

            <select name="category" class="form-select ms-1">
                <option value="">Toutes les cat√©gories</option>
                {% for category in categories %}
                    <option value="{{ category.id }}" {% if category.id == app.request.get('category') %}selected{% endif %}>{{ category.name }}</option>
                {% endfor %}
            </select>

            <button type="submit" class="btn btn-outline-primary ms-1">Filtrer</button>

        </form>
    </div>
</div>

<hr>
{% for coaster in coasters %}
    <div class="card mb-3">
        <div class="card-body">
            <div class="d-flex justify-content-between">
                <h5 class="card-title">{{ coaster.name }}</h5>
                <div>{{ coaster.park }}</div>
            </div>
            
            <div>Max Speed: {{ coaster.maxSpeed }}km/h - Max Height: {{ coaster.maxHeight }}m - Length: {{ coaster.length }}m</div>
            <div>{% for category in coaster.categories %} <span class="badge" style="background-color:{{ category.color }}">{{ category }}</span> {% endfor %}</div>
            <hr>
            <a href="{{ path('app_coaster_edit', {'id': coaster.id })}}" class="btn btn-secondary">Modifier</a>
            <a href="{{ path('app_coaster_delete', {'id': coaster.id })}}" class="btn btn-danger">Supprimer</a>
            {{ coaster.imageFileName }}
        </div>
    </div>
{% endfor %}
<hr>
{% include "utils/_pagination.html.twig" with {'route' : 'app_coaster_index'} %}
{% endblock %}